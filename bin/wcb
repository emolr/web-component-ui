#!/usr/bin/env node
const process = require('process');
const program = require('commander');
const runner = require('../runner');

const cwd = process.cwd();
const gulp = runner.gulp.run({directory: cwd});

program
    .version('0.0.1')
    .option('-w, --watch', 'Keep watching for changes')
    .option('-e, --env [env]', 'environments [prod]')
    .parse(process.argv);

if (!program.watch) {
    if (program.env === 'prod') {
        gulp.build({production: true});
    } else {
        gulp.build().then(() => {
            console.log('super done')
        }).catch(err => {
            console.log(err)
        });
    }
} else {
    if (program.env === 'prod') {
        gulp.watch({production: true});
    } else {
        gulp.watch();
    }
}


